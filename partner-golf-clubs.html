<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>ææºã‚´ãƒ«ãƒ•éƒ¨ - Golf-Caddy Matching Service</title>
  <style>
    :root {
      --primary-color: #2f8f2f;
      --primary-dark: #1e5f1e;
      --primary-light: #4caf50;
      --secondary-color: #ffffff;
      --accent-color: #ff6b35;
      --text-color: #333333;
      --text-light: #666666;
      --bg-light: #f8f9fa;
      --bg-dark: #2c3e50;
      --max-width: 1200px;
      --border-radius: 12px;
      --shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      --shadow-hover: 0 8px 30px rgba(0, 0, 0, 0.15);
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: "Helvetica Neue", Arial, "Hiragino Sans", "Yu Gothic", "Meiryo", sans-serif;
      color: var(--text-color);
      line-height: 1.6;
      background: var(--bg-light);
    }



    /* Navigation */
    .top-nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      display: flex;
      justify-content: flex-end;
      align-items: center;
      padding: 1rem 2rem;
      height: 104px;
      background: rgba(0,0,0,0.28);
      backdrop-filter: blur(2px);
      border-bottom: 1px solid rgba(255,255,255,0.08);
      z-index: 1000;
      transition: var(--transition);
    }

    .top-nav.scrolled { background: rgba(0,0,0,0.7); }

    .nav-main {
      display: flex;
      gap: 2rem;
      align-items: center;
    }

    .nav-item {
      position: relative;
    }

    .nav-tab {
      color: #fff;
      text-decoration: none;
      padding: 0.75rem 1.5rem;
      border-radius: var(--border-radius);
      font-weight: 500;
      font-size: 0.82rem;
      transition: var(--transition);
      display: block;
      letter-spacing: 0.02em;
      text-shadow: 0 1px 2px rgba(0,0,0,0.5);
    }

    .nav-tab:hover {
      background: rgba(255,255,255,0.1);
      transform: translateY(-1px);
    }

    .dropdown-menu {
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0,0,0,0.9);
      backdrop-filter: blur(10px);
      border-radius: var(--border-radius);
      padding: 0.5rem 0;
      min-width: 200px;
      opacity: 0;
      visibility: hidden;
      transform: translateX(-50%) translateY(-10px);
      transition: var(--transition);
      z-index: 1001;
    }

    .nav-item:hover .dropdown-menu {
      opacity: 1;
      visibility: visible;
      transform: translateX(-50%) translateY(0);
    }

    .dropdown-item {
      display: block;
      padding: 0.75rem 1.5rem;
      color: #fff;
      text-decoration: none;
      transition: var(--transition);
      font-size: 0.9rem;
    }

    .dropdown-item:hover {
      background: rgba(255,255,255,0.1);
    }

    .auth-dropdown {
      min-width: 150px;
    }

    /* Main Content */
    .main-content {
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 8rem 2rem 3rem; /* å›ºå®šãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³åˆ†ã®top paddingè¿½åŠ  */
    }

    .section-header {
      text-align: center;
      margin-bottom: 3rem;
    }

    .section-header h2 {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--text-color);
      margin-bottom: 1rem;
    }

    .section-header p {
      font-size: 1.1rem;
      color: var(--text-light);
      max-width: 600px;
      margin: 0 auto;
    }

    /* Golf Club Grid */
    .golf-clubs-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 2rem;
      margin-bottom: 4rem;
    }

    .golf-club-card {
      background: var(--secondary-color);
      border-radius: var(--border-radius);
      overflow: hidden;
      box-shadow: var(--shadow);
      transition: var(--transition);
      cursor: pointer;
    }

    .golf-club-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-hover);
    }

    .club-image {
      width: 100%;
      height: 250px;
      background: linear-gradient(135deg, #2d5a27 0%, #4a7c59 50%, #6b8e23 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 3rem;
      position: relative;
      overflow: hidden;
    }

    .club-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .club-image::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(45,90,39,0.8) 0%, rgba(74,124,89,0.8) 50%, rgba(107,142,35,0.8) 100%);
      z-index: 1;
    }

    .club-image .club-icon {
      position: relative;
      z-index: 2;
    }

    .club-content {
      padding: 1.5rem;
    }

    .club-name {
      font-size: 1.4rem;
      font-weight: 700;
      color: var(--text-color);
      margin-bottom: 0.5rem;
    }

    .club-university {
      color: var(--primary-color);
      font-size: 0.95rem;
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .club-university::before {
      content: 'ğŸ“';
      font-size: 1rem;
    }

    .club-location {
      color: var(--text-light);
      font-size: 0.95rem;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .club-location::before {
      content: 'ğŸ“';
      font-size: 1rem;
    }

    .club-description {
      color: var(--text-color);
      font-size: 0.95rem;
      line-height: 1.6;
      margin-bottom: 1rem;
    }

    .club-features {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    .feature-tag {
      background: var(--primary-light);
      color: white;
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 500;
    }

    .view-details {
      background: var(--primary-color);
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: var(--border-radius);
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      width: 100%;
    }

    .view-details:hover {
      background: var(--primary-dark);
      transform: translateY(-2px);
    }

    /* Partnership Section */
    .partnership-section {
      background: var(--secondary-color);
      border-radius: var(--border-radius);
      padding: 3rem;
      text-align: center;
      box-shadow: var(--shadow);
      margin-top: 4rem;
    }

    .partnership-section h3 {
      font-size: 2rem;
      font-weight: 700;
      color: var(--text-color);
      margin-bottom: 1rem;
    }

    .partnership-section p {
      font-size: 1.1rem;
      color: var(--text-light);
      margin-bottom: 2rem;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    .partnership-buttons {
      display: flex;
      gap: 1.5rem;
      justify-content: center;
      flex-wrap: wrap;
    }

    .partnership-btn {
      border: none;
      padding: 1rem 2rem;
      border-radius: var(--border-radius);
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      text-decoration: none;
      display: inline-block;
      min-width: 200px;
    }

    .partnership-btn.caddy-register {
      background: var(--primary-color);
      color: white;
    }

    .partnership-btn.caddy-register:hover {
      background: var(--primary-dark);
      transform: translateY(-2px);
    }

    .partnership-btn.contact-inquiry {
      background: var(--accent-color);
      color: white;
    }

    .partnership-btn.contact-inquiry:hover {
      background: #e55a2b;
      transform: translateY(-2px);
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.8);
      z-index: 2000;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }

    .modal.show {
      display: flex;
    }

    .modal-content {
      background: var(--secondary-color);
      border-radius: var(--border-radius);
      max-width: 600px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
    }

    .modal-header {
      padding: 2rem 2rem 1rem;
      border-bottom: 1px solid #eee;
      position: relative;
    }

    .modal-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--text-light);
      padding: 0.5rem;
      border-radius: 50%;
      transition: var(--transition);
    }

    .modal-close:hover {
      background: var(--bg-light);
      color: var(--text-color);
    }

    .modal-title {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--text-color);
      margin-bottom: 0.5rem;
    }

    .modal-subtitle {
      color: var(--text-light);
      font-size: 1rem;
    }

    .modal-body {
      padding: 1rem 2rem 2rem;
    }

    .modal-image {
      width: 100%;
      height: 200px;
      background: linear-gradient(135deg, #2d5a27 0%, #4a7c59 50%, #6b8e23 100%);
      border-radius: var(--border-radius);
      margin-bottom: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 2rem;
    }

    .modal-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: var(--border-radius);
    }

    .modal-description {
      color: var(--text-color);
      line-height: 1.7;
      margin-bottom: 1.5rem;
    }

    .modal-features {
      margin-bottom: 1.5rem;
    }

    .modal-features h4 {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--text-color);
      margin-bottom: 0.75rem;
    }

    .modal-features ul {
      list-style: none;
      padding-left: 0;
    }

    .modal-features li {
      padding: 0.5rem 0;
      border-bottom: 1px solid #eee;
      color: var(--text-color);
    }

    .modal-features li:last-child {
      border-bottom: none;
    }

    .modal-contact {
      background: var(--bg-light);
      padding: 1.5rem;
      border-radius: var(--border-radius);
      margin-top: 1.5rem;
    }

    .modal-contact h4 {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--text-color);
      margin-bottom: 1rem;
    }

    .contact-info {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }

    .contact-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--text-color);
    }

    .contact-item::before {
      font-size: 1.2rem;
    }

    .contact-item.phone::before {
      content: 'ğŸ“';
    }

    .contact-item.email::before {
      content: 'âœ‰ï¸';
    }

    /* Responsive */
    @media (max-width: 768px) {
      .top-nav {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        padding: 0.3rem 0.375rem;
        gap: 3px;
        z-index: 1000;
        justify-content: center;
        height: 62px;
        flex-wrap: wrap;
      }

      .nav-main {
        gap: 0.3rem;
        flex-wrap: wrap;
        width: 100%;
        justify-content: center;
      }

      .nav-item {
        width: auto;
        max-width: none;
      }

      .nav-tab {
        padding: 0.19rem 0.26rem;
        font-size: 0.65rem;
        width: auto;
        border-radius: 5px;
        white-space: nowrap;
        letter-spacing: 0;
        text-shadow: none;
      }

      .main-content {
        padding: 6rem 1rem 3rem;
      }

      .golf-clubs-grid {
        grid-template-columns: 1fr;
      }

      .modal {
        padding: 1rem;
      }

      .modal-content {
        margin: 1rem;
      }

      .contact-info {
        grid-template-columns: 1fr;
      }
    }

    /* Loading Animation */
    .loading {
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.6s ease-out forwards;
    }

    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .golf-club-card:nth-child(1) { animation-delay: 0.1s; }
    .golf-club-card:nth-child(2) { animation-delay: 0.2s; }
    .golf-club-card:nth-child(3) { animation-delay: 0.3s; }
    .golf-club-card:nth-child(4) { animation-delay: 0.4s; }
    .golf-club-card:nth-child(5) { animation-delay: 0.5s; }
    .golf-club-card:nth-child(6) { animation-delay: 0.6s; }
  </style>
</head>
<body>


  <!-- Navigation -->
  <nav class="top-nav">
    <div class="nav-main">
      <div class="nav-item">
        <a href="index.html#golf-course-benefits" class="nav-tab">ã‚µãƒ¼ãƒ“ã‚¹</a>
      </div>
      <div class="nav-item">
        <a href="index.html#golf-course-benefits" class="nav-tab">ã‚´ãƒ«ãƒ•å ´å‘ã‘</a>
        <div class="dropdown-menu">
          <a href="index.html#golf-course-benefits" class="dropdown-item">ãƒ¡ãƒªãƒƒãƒˆ</a>
          <a href="index.html#features" class="dropdown-item">æ©Ÿèƒ½ç´¹ä»‹</a>
          <a href="partner-golf-courses.html" class="dropdown-item">ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼å‹Ÿé›†</a>
        </div>
      </div>
      <div class="nav-item">
        <a href="index.html#caddy-benefits" class="nav-tab">ã‚­ãƒ£ãƒ‡ã‚£å‘ã‘</a>
        <div class="dropdown-menu">
          <a href="index.html#caddy-benefits" class="dropdown-item">ãƒ¡ãƒªãƒƒãƒˆ</a>
          <a href="index.html#features" class="dropdown-item">æ©Ÿèƒ½ç´¹ä»‹</a>
          <a href="training-program.html" class="dropdown-item">ç ”ä¿®ã«ã¤ã„ã¦</a>
          <a href="partner-golf-clubs.html" class="dropdown-item">ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼å‹Ÿé›†</a>
        </div>
      </div>
      <div class="nav-item">
        <a href="partner-golf-courses.html" class="nav-tab">ææºã‚´ãƒ«ãƒ•å ´</a>
        <div class="dropdown-menu">
          <a href="partner-golf-courses.html" class="dropdown-item">ã‚´ãƒ«ãƒ•å ´ä¸€è¦§</a>
          <a href="partner-golf-courses.html#partnership" class="dropdown-item">ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼å‹Ÿé›†</a>
        </div>
      </div>
      <div class="nav-item">
        <a href="partner-golf-clubs.html" class="nav-tab">ææºã‚´ãƒ«ãƒ•éƒ¨</a>
        <div class="dropdown-menu">
          <a href="partner-golf-clubs.html" class="dropdown-item">ã‚´ãƒ«ãƒ•éƒ¨ä¸€è¦§</a>
          <a href="partner-golf-clubs.html#partnership" class="dropdown-item">ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼å‹Ÿé›†</a>
        </div>
      </div>
      <div class="nav-item">
        <a class="auth-link nav-tab" href="#" id="loginModalTrigger">ãƒ­ã‚°ã‚¤ãƒ³</a>
        <div class="dropdown-menu auth-dropdown">
          <a href="#" class="dropdown-item" data-role="golf">ã‚´ãƒ«ãƒ•å ´</a>
          <a href="#" class="dropdown-item" data-role="caddy">ã‚­ãƒ£ãƒ‡ã‚£</a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Golf Clubs Section -->
    <section id="golf-clubs">
      <div class="section-header">
        <h2>ææºã‚´ãƒ«ãƒ•éƒ¨ä¸€è¦§</h2>
        <p>å¤§å­¦ã‚„ä¼æ¥­ã®ã‚´ãƒ«ãƒ•éƒ¨ã¨ææºã—ã€ã‚­ãƒ£ãƒ‡ã‚£ã®ç ”ä¿®æ©Ÿä¼šã‚’å‰µå‡ºã—ã¦ã„ã¾ã™ã€‚</p>
      </div>

      <div class="golf-clubs-grid" id="golfClubsGrid">
        <!-- ã‚´ãƒ«ãƒ•éƒ¨ã‚«ãƒ¼ãƒ‰ãŒã“ã“ã«å‹•çš„ã«ç”Ÿæˆã•ã‚Œã¾ã™ -->
      </div>
    </section>

    <!-- Partnership Section -->
    <section id="partnership" class="partnership-section">
      <h3>ã‚´ãƒ«ãƒ•éƒ¨ã®çš†æ§˜ã‚‚æ˜¯éã”å‚åŠ ãã ã•ã„</h3>
      <p>ã‚­ãƒ£ãƒ‡ã‚£ãƒ—ãƒ©ã‚¹ã¨ææºã—ã¦ã€ã‚´ãƒ«ãƒ•éƒ¨ã®æ´»å‹•ã‚’ã‚ˆã‚Šå……å®Ÿã•ã›ã¾ã›ã‚“ã‹ï¼Ÿ<br>çµŒé¨“è±Šå¯Œãªã‚­ãƒ£ãƒ‡ã‚£ã¨ã®äº¤æµã§ã€æŠ€è¡“å‘ä¸Šã¨æ–°ã—ã„ç™ºè¦‹ã‚’å®Ÿç¾ã§ãã¾ã™ã€‚</p>
      
      <div class="partnership-buttons">
        <button class="partnership-btn caddy-register" onclick="openCaddyRegistration()">ã‚­ãƒ£ãƒ‡ã‚£ç™»éŒ²ã‚’ã™ã‚‹</button>
        <button class="partnership-btn contact-inquiry" onclick="openContactForm()">ã‚´ãƒ«ãƒ•éƒ¨/ã‚µãƒ¼ã‚¯ãƒ«ã¨ã—ã¦å•ã„åˆã‚ã›ã‚‹</button>
      </div>
    </section>
  </main>

  <!-- Modal -->
  <div class="modal" id="clubModal">
    <div class="modal-content">
      <div class="modal-header">
        <button class="modal-close" id="modalClose">&times;</button>
        <h3 class="modal-title" id="modalTitle">ã‚´ãƒ«ãƒ•éƒ¨å</h3>
        <p class="modal-subtitle" id="modalSubtitle">å¤§å­¦ãƒ»ä¼æ¥­å</p>
      </div>
      <div class="modal-body">
        <div class="modal-image" id="modalImage">
          <div class="club-icon">ğŸŒï¸</div>
        </div>
        <div class="modal-description" id="modalDescription">
          ã‚´ãƒ«ãƒ•éƒ¨ã®è©³ç´°ãªèª¬æ˜ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
        </div>
        <div class="modal-features">
          <h4>ç‰¹å¾´ãƒ»æ´»å‹•å†…å®¹</h4>
          <ul id="modalFeatures">
            <li>ç‰¹å¾´1</li>
            <li>ç‰¹å¾´2</li>
            <li>ç‰¹å¾´3</li>
          </ul>
        </div>
        <div class="modal-contact">
          <h4>ãŠå•ã„åˆã‚ã›</h4>
          <div class="contact-info">
            <div class="contact-item phone" id="modalPhone">é›»è©±ç•ªå·</div>
            <div class="contact-item email" id="modalEmail">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    const supabase = window.supabase.createClient(
      "https://vqjxajzaasuqfgvhvxci.supabase.co",
      "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZxanhhanoaYXN1cWZndmh2eGNpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM2MjIxMzgsImV4cCI6MjA2OTE5ODEzOH0.NmKwgZA1_-TTvMTQt07QRXtIlR-DPOPATVPuQ3QuO54"
    );

    // ãƒ¢ãƒ¼ãƒ€ãƒ«ã®åˆ¶å¾¡
    const modal = document.getElementById('clubModal');
    const modalClose = document.getElementById('modalClose');

    modalClose.onclick = () => {
      modal.classList.remove('show');
    };

    modal.onclick = (e) => {
      if (e.target === modal) {
        modal.classList.remove('show');
      }
    };

    // ã‚´ãƒ«ãƒ•éƒ¨ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã¨è¡¨ç¤º
    async function loadGolfClubs() {
      try {
        console.log('ã‚´ãƒ«ãƒ•éƒ¨ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...');
        
        // ç¾åœ¨ã¯ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ï¼ˆå°†æ¥çš„ã«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰å–å¾—ï¼‰
        const mockGolfClubs = [
          {
            id: 1,
            name: 'æ±äº¬å¤§å­¦ã‚´ãƒ«ãƒ•éƒ¨',
            university: 'æ±äº¬å¤§å­¦',
            location: 'æ±äº¬éƒ½æ–‡äº¬åŒº',
            description: 'æ±äº¬å¤§å­¦ã®å­¦ç”Ÿã§æ§‹æˆã•ã‚Œã‚‹ã‚´ãƒ«ãƒ•éƒ¨ã§ã™ã€‚æŠ€è¡“å‘ä¸Šã¨äº¤æµã‚’ç›®çš„ã¨ã—ã¦æ´»å‹•ã—ã¦ã„ã¾ã™ã€‚',
            image_url: null,
            phone: '03-1234-5678',
            email: 'golf@u-tokyo.ac.jp',
            features: ['å­¦ç”Ÿä¸»ä½“', 'æŠ€è¡“å‘ä¸Š', 'äº¤æµæ´»å‹•']
          },
          {
            id: 2,
            name: 'æ—©ç¨²ç”°å¤§å­¦ã‚´ãƒ«ãƒ•éƒ¨',
            university: 'æ—©ç¨²ç”°å¤§å­¦',
            location: 'æ±äº¬éƒ½æ–°å®¿åŒº',
            description: 'æ—©ç¨²ç”°å¤§å­¦ã®å­¦ç”Ÿã§æ§‹æˆã•ã‚Œã‚‹ã‚´ãƒ«ãƒ•éƒ¨ã§ã™ã€‚ç«¶æŠ€ä¼šã¸ã®å‚åŠ ã‚‚ç©æ¥µçš„ã«è¡Œã£ã¦ã„ã¾ã™ã€‚',
            image_url: null,
            phone: '03-2345-6789',
            email: 'golf@waseda.ac.jp',
            features: ['ç«¶æŠ€ä¼šå‚åŠ ', 'æŠ€è¡“å‘ä¸Š', 'éƒ¨æ´»å‹•']
          },
          {
            id: 3,
            name: 'æ…¶æ‡‰ç¾©å¡¾å¤§å­¦ã‚´ãƒ«ãƒ•éƒ¨',
            university: 'æ…¶æ‡‰ç¾©å¡¾å¤§å­¦',
            location: 'æ±äº¬éƒ½æ¸¯åŒº',
            description: 'æ…¶æ‡‰ç¾©å¡¾å¤§å­¦ã®å­¦ç”Ÿã§æ§‹æˆã•ã‚Œã‚‹ã‚´ãƒ«ãƒ•éƒ¨ã§ã™ã€‚ä¼çµ±ã‚ã‚‹éƒ¨æ´»å‹•ã¨ã—ã¦å¤šãã®å­¦ç”Ÿã«æ„›ã•ã‚Œã¦ã„ã¾ã™ã€‚',
            image_url: null,
            phone: '03-3456-7890',
            email: 'golf@keio.ac.jp',
            features: ['ä¼çµ±ã‚ã‚‹éƒ¨æ´»å‹•', 'æŠ€è¡“å‘ä¸Š', 'å­¦ç”Ÿäº¤æµ']
          }
        ];

        console.log('å–å¾—ã—ãŸã‚´ãƒ«ãƒ•éƒ¨:', mockGolfClubs);

        if (mockGolfClubs.length === 0) {
          document.getElementById('golfClubsGrid').innerHTML = 
            '<div style="text-align: center; padding: 3rem; color: var(--text-light);">ç¾åœ¨ã€ææºã‚´ãƒ«ãƒ•éƒ¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</div>';
          return;
        }

        // ã‚´ãƒ«ãƒ•éƒ¨ã‚«ãƒ¼ãƒ‰ã‚’ç”Ÿæˆ
        const grid = document.getElementById('golfClubsGrid');
        grid.innerHTML = '';

        mockGolfClubs.forEach((club, index) => {
          const card = createGolfClubCard(club, index);
          grid.appendChild(card);
        });

      } catch (error) {
        console.error('ã‚´ãƒ«ãƒ•éƒ¨ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', error);
        document.getElementById('golfClubsGrid').innerHTML = 
          '<div style="text-align: center; padding: 3rem; color: var(--text-light);">ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚</div>';
      }
    }

    // ã‚´ãƒ«ãƒ•éƒ¨ã‚«ãƒ¼ãƒ‰ã®ä½œæˆ
    function createGolfClubCard(club, index) {
      const card = document.createElement('div');
      card.className = 'golf-club-card loading';
      card.style.animationDelay = `${index * 0.1}s`;

      // ç”»åƒURLãŒã‚ã‚‹å ´åˆã¯ä½¿ç”¨ã€ãªã„å ´åˆã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¢ã‚¤ã‚³ãƒ³
      const imageContent = club.image_url 
        ? `<img src="${club.image_url}" alt="${club.name}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">`
        : '';

      card.innerHTML = `
        <div class="club-image">
          ${imageContent}
          <div class="club-icon" style="${club.image_url ? 'display: none;' : ''}">ğŸŒï¸</div>
        </div>
        <div class="club-content">
          <h3 class="club-name">${club.name || 'ã‚´ãƒ«ãƒ•éƒ¨åæœªè¨­å®š'}</h3>
          <div class="club-university">${club.university || 'å¤§å­¦ãƒ»ä¼æ¥­åæœªè¨­å®š'}</div>
          <div class="club-location">${club.location || 'æ‰€åœ¨åœ°æœªè¨­å®š'}</div>
          <p class="club-description">${club.description ? club.description.substring(0, 100) + '...' : 'è©³ç´°æƒ…å ±ã¯ã‚ã‚Šã¾ã›ã‚“'}</p>
          <div class="club-features">
            ${club.features ? club.features.map(feature => `<span class="feature-tag">${feature}</span>`).join('') : ''}
          </div>
          <button class="view-details" onclick="showClubDetails(${club.id})">è©³ç´°ã‚’è¦‹ã‚‹</button>
        </div>
      `;

      return card;
    }

    // ã‚´ãƒ«ãƒ•éƒ¨è©³ç´°ã®è¡¨ç¤º
    async function showClubDetails(clubId) {
      try {
        // ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰è©²å½“ã™ã‚‹ã‚´ãƒ«ãƒ•éƒ¨ã‚’å–å¾—
        const mockGolfClubs = [
          {
            id: 1,
            name: 'æ±äº¬å¤§å­¦ã‚´ãƒ«ãƒ•éƒ¨',
            university: 'æ±äº¬å¤§å­¦',
            location: 'æ±äº¬éƒ½æ–‡äº¬åŒº',
            description: 'æ±äº¬å¤§å­¦ã®å­¦ç”Ÿã§æ§‹æˆã•ã‚Œã‚‹ã‚´ãƒ«ãƒ•éƒ¨ã§ã™ã€‚æŠ€è¡“å‘ä¸Šã¨äº¤æµã‚’ç›®çš„ã¨ã—ã¦æ´»å‹•ã—ã¦ã„ã¾ã™ã€‚æ¯é€±æœ«ã«ç·´ç¿’ã‚’è¡Œã„ã€å®šæœŸçš„ã«ä»–å¤§å­¦ã¨ã®äº¤æµè©¦åˆã‚‚å®Ÿæ–½ã—ã¦ã„ã¾ã™ã€‚',
            image_url: null,
            phone: '03-1234-5678',
            email: 'golf@u-tokyo.ac.jp',
            features: ['å­¦ç”Ÿä¸»ä½“', 'æŠ€è¡“å‘ä¸Š', 'äº¤æµæ´»å‹•', 'é€±æœ«ç·´ç¿’', 'ä»–å¤§å­¦ã¨ã®äº¤æµè©¦åˆ']
          },
          {
            id: 2,
            name: 'æ—©ç¨²ç”°å¤§å­¦ã‚´ãƒ«ãƒ•éƒ¨',
            university: 'æ—©ç¨²ç”°å¤§å­¦',
            location: 'æ±äº¬éƒ½æ–°å®¿åŒº',
            description: 'æ—©ç¨²ç”°å¤§å­¦ã®å­¦ç”Ÿã§æ§‹æˆã•ã‚Œã‚‹ã‚´ãƒ«ãƒ•éƒ¨ã§ã™ã€‚ç«¶æŠ€ä¼šã¸ã®å‚åŠ ã‚‚ç©æ¥µçš„ã«è¡Œã£ã¦ã„ã¾ã™ã€‚éƒ¨å“¡åŒå£«ã®è¦ªç¦ã‚’æ·±ã‚ãªãŒã‚‰ã€ã‚´ãƒ«ãƒ•æŠ€è¡“ã®å‘ä¸Šã‚’ç›®æŒ‡ã—ã¦ã„ã¾ã™ã€‚',
            image_url: null,
            phone: '03-2345-6789',
            email: 'golf@waseda.ac.jp',
            features: ['ç«¶æŠ€ä¼šå‚åŠ ', 'æŠ€è¡“å‘ä¸Š', 'éƒ¨æ´»å‹•', 'è¦ªç¦æ´»å‹•', 'ç·´ç¿’ä¼š']
          },
          {
            id: 3,
            name: 'æ…¶æ‡‰ç¾©å¡¾å¤§å­¦ã‚´ãƒ«ãƒ•éƒ¨',
            university: 'æ…¶æ‡‰ç¾©å¡¾å¤§å­¦',
            location: 'æ±äº¬éƒ½æ¸¯åŒº',
            description: 'æ…¶æ‡‰ç¾©å¡¾å¤§å­¦ã®å­¦ç”Ÿã§æ§‹æˆã•ã‚Œã‚‹ã‚´ãƒ«ãƒ•éƒ¨ã§ã™ã€‚ä¼çµ±ã‚ã‚‹éƒ¨æ´»å‹•ã¨ã—ã¦å¤šãã®å­¦ç”Ÿã«æ„›ã•ã‚Œã¦ã„ã¾ã™ã€‚OBãƒ»OGã¨ã®äº¤æµã‚‚ç››ã‚“ã§ã€å’æ¥­å¾Œã‚‚ã‚´ãƒ«ãƒ•ã‚’é€šã˜ãŸç¹‹ãŒã‚Šã‚’å¤§åˆ‡ã«ã—ã¦ã„ã¾ã™ã€‚',
            image_url: null,
            phone: '03-3456-7890',
            email: 'golf@keio.ac.jp',
            features: ['ä¼çµ±ã‚ã‚‹éƒ¨æ´»å‹•', 'æŠ€è¡“å‘ä¸Š', 'å­¦ç”Ÿäº¤æµ', 'OBãƒ»OGäº¤æµ', 'ç·´ç¿’ä¼š']
          }
        ];

        const club = mockGolfClubs.find(c => c.id === clubId);
        if (!club) {
          alert('ã‚´ãƒ«ãƒ•éƒ¨æƒ…å ±ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
          return;
        }

        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã®å†…å®¹ã‚’æ›´æ–°
        document.getElementById('modalTitle').textContent = club.name || 'ã‚´ãƒ«ãƒ•éƒ¨åæœªè¨­å®š';
        document.getElementById('modalSubtitle').textContent = club.university || 'å¤§å­¦ãƒ»ä¼æ¥­åæœªè¨­å®š';
        document.getElementById('modalDescription').textContent = club.description || 'è©³ç´°æƒ…å ±ã¯ã‚ã‚Šã¾ã›ã‚“';
        
        // ç”»åƒã®æ›´æ–°
        const modalImage = document.getElementById('modalImage');
        if (club.image_url) {
          modalImage.innerHTML = `<img src="${club.image_url}" alt="${club.name}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';"><div class="club-icon" style="display: none;">ğŸŒï¸</div>`;
        } else {
          modalImage.innerHTML = '<div class="club-icon">ğŸŒï¸</div>';
        }

        // ç‰¹å¾´ãƒ»æ´»å‹•å†…å®¹ã®æ›´æ–°
        const featuresList = document.getElementById('modalFeatures');
        if (club.features && club.features.length > 0) {
          featuresList.innerHTML = club.features.map(feature => `<li>${feature}</li>`).join('');
        } else {
          featuresList.innerHTML = '<li>ç‰¹å¾´æƒ…å ±ã¯ã‚ã‚Šã¾ã›ã‚“</li>';
        }

        // é€£çµ¡å…ˆæƒ…å ±ã®æ›´æ–°
        document.getElementById('modalPhone').textContent = club.phone || 'é›»è©±ç•ªå·æœªè¨­å®š';
        document.getElementById('modalEmail').textContent = club.email || 'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹æœªè¨­å®š';

        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
        modal.classList.add('show');

      } catch (error) {
        console.error('ã‚´ãƒ«ãƒ•éƒ¨è©³ç´°è¡¨ç¤ºã‚¨ãƒ©ãƒ¼:', error);
        alert('è©³ç´°æƒ…å ±ã®è¡¨ç¤ºã«å¤±æ•—ã—ã¾ã—ãŸ');
      }
    }

    // ã‚­ãƒ£ãƒ‡ã‚£ç™»éŒ²ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’é–‹ã
    function openCaddyRegistration() {
      // ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã®ãƒ­ã‚°ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ€ãƒ«ã¨åŒã˜ã‚¹ã‚¿ã‚¤ãƒ«ã®ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’ä½œæˆ
      const modalHTML = `
        <div id="caddyRegistrationModal" style="position:fixed; inset:0; background:rgba(0,0,0,0.7); display:flex; align-items:center; justify-content:center; z-index:1000;">
          <div style="background:white; border-radius:12px; padding:2rem; width:90%; max-width:400px; text-align:center; position:relative;">
            <button onclick="closeCaddyRegistration()" style="position:absolute; top:1rem; right:1rem; background:none; border:none; font-size:24px; cursor:pointer;">Ã—</button>
            
            <h3 style="margin-bottom:1.5rem; color:#333; font-size:1.2rem; font-weight:bold;">ã‚­ãƒ£ãƒ‡ã‚£ç™»éŒ²</h3>
            
            <div style="margin-bottom:1rem; text-align:left;">
              <label style="display:block; margin-bottom:0.5rem; font-weight:500;">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
              <input id="caddyEmail" type="email" placeholder="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›" style="width:100%; padding:0.75rem; border:2px solid #ddd; border-radius:6px; font-size:1rem;" />
            </div>
            
            <div style="margin-bottom:1.5rem; text-align:left;">
              <label style="display:block; margin-bottom:0.5rem; font-weight:500;">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
              <input id="caddyPassword" type="password" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›" style="width:100%; padding:0.75rem; border:2px solid #ddd; border-radius:6px; font-size:1rem;" />
            </div>
            
            <button onclick="registerCaddy()" style="width:100%; background:#2e7d32; color:white; border:none; padding:0.875rem; border-radius:6px; font-size:1rem; font-weight:600; cursor:pointer; margin-bottom:1rem;">
              ç™»éŒ²
            </button>
            
            <p style="margin:0; color:#666; font-size:0.9rem;">
              æ—¢ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã®æ–¹ã¯<a href="caddy_dashboard.html" style="color:#2e7d32;">ã“ã¡ã‚‰</a>
            </p>
          </div>
        </div>
      `;
      
      document.body.insertAdjacentHTML('beforeend', modalHTML);
    }

    // ã‚­ãƒ£ãƒ‡ã‚£ç™»éŒ²ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
    function closeCaddyRegistration() {
      const modal = document.getElementById('caddyRegistrationModal');
      if (modal) {
        modal.remove();
      }
    }

    // ã‚­ãƒ£ãƒ‡ã‚£ç™»éŒ²å‡¦ç†
    async function registerCaddy() {
      const email = document.getElementById('caddyEmail').value;
      const password = document.getElementById('caddyPassword').value;
      
      if (!email || !password) {
        alert('ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
        return;
      }
      
      try {
        // ã“ã“ã§Supabaseã®èªè¨¼å‡¦ç†ã‚’è¡Œã†
        const { data, error } = await supabase.auth.signUp({
          email: email,
          password: password
        });
        
        if (error) {
          throw error;
        } else {
          alert('ç™»éŒ²ãŒå®Œäº†ã—ã¾ã—ãŸï¼ç¢ºèªãƒ¡ãƒ¼ãƒ«ã‚’ã”ç¢ºèªãã ã•ã„ã€‚');
          closeCaddyRegistration();
        }
      } catch (error) {
        console.error('Registration error:', error);
        alert('ç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + error.message);
      }
    }

    // ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ ã‚’é–‹ã
    function openContactForm() {
      const modalHTML = `
        <div id="contactFormModal" style="position:fixed; inset:0; background:rgba(0,0,0,0.7); display:flex; align-items:center; justify-content:center; z-index:1000;">
          <div style="background:white; border-radius:12px; padding:2rem; width:90%; max-width:500px; text-align:center; position:relative;">
            <button onclick="closeContactForm()" style="position:absolute; top:1rem; right:1rem; background:none; border:none; font-size:24px; cursor:pointer;">Ã—</button>
            
            <h3 style="margin-bottom:1.5rem; color:#333; font-size:1.2rem; font-weight:bold;">ã‚´ãƒ«ãƒ•éƒ¨/ã‚µãƒ¼ã‚¯ãƒ«ã‹ã‚‰ã®ãŠå•ã„åˆã‚ã›</h3>
            
            <div style="margin-bottom:1rem; text-align:left;">
              <label style="display:block; margin-bottom:0.5rem; font-weight:500;">ã‚´ãƒ«ãƒ•éƒ¨/ã‚µãƒ¼ã‚¯ãƒ«å<span style="color:red;">*</span></label>
              <input id="clubName" type="text" placeholder="ä¾‹: æ±äº¬å¤§å­¦ã‚´ãƒ«ãƒ•éƒ¨" style="width:100%; padding:0.75rem; border:2px solid #ddd; border-radius:6px; font-size:1rem;" required />
            </div>
            
            <div style="margin-bottom:1rem; text-align:left;">
              <label style="display:block; margin-bottom:0.5rem; font-weight:500;">æ‹…å½“è€…å<span style="color:red;">*</span></label>
              <input id="contactName" type="text" placeholder="æ‹…å½“è€…åã‚’å…¥åŠ›" style="width:100%; padding:0.75rem; border:2px solid #ddd; border-radius:6px; font-size:1rem;" required />
            </div>
            
            <div style="margin-bottom:1rem; text-align:left;">
              <label style="display:block; margin-bottom:0.5rem; font-weight:500;">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹<span style="color:red;">*</span></label>
              <input id="contactEmail" type="email" placeholder="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›" style="width:100%; padding:0.75rem; border:2px solid #ddd; border-radius:6px; font-size:1rem;" required />
            </div>
            
            <div style="margin-bottom:1.5rem; text-align:left;">
              <label style="display:block; margin-bottom:0.5rem; font-weight:500;">ãŠå•ã„åˆã‚ã›å†…å®¹</label>
              <textarea id="contactMessage" placeholder="ææºã«ã¤ã„ã¦è©³ã—ãæ•™ãˆã¦ãã ã•ã„" style="width:100%; padding:0.75rem; border:2px solid #ddd; border-radius:6px; font-size:1rem; min-height:100px; resize:vertical;"></textarea>
            </div>
            
            <button onclick="sendContactForm()" style="width:100%; background:#ff6b35; color:white; border:none; padding:0.875rem; border-radius:6px; font-size:1rem; font-weight:600; cursor:pointer;">
              é€ä¿¡
            </button>
          </div>
        </div>
      `;
      
      document.body.insertAdjacentHTML('beforeend', modalHTML);
    }

    // ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ ã‚’é–‰ã˜ã‚‹
    function closeContactForm() {
      const modal = document.getElementById('contactFormModal');
      if (modal) {
        modal.remove();
      }
    }

    // ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡å‡¦ç†
    async function sendContactForm() {
      const clubName = document.getElementById('clubName').value;
      const contactName = document.getElementById('contactName').value;
      const contactEmail = document.getElementById('contactEmail').value;
      const contactMessage = document.getElementById('contactMessage').value;
      
      if (!clubName || !contactName || !contactEmail) {
        alert('å¿…é ˆé …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
        return;
      }
      
      try {
        // é€ä¿¡ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
        const sendButton = document.querySelector('#contactFormModal button[onclick="sendContactForm()"]');
        const originalText = sendButton.textContent;
        sendButton.textContent = 'é€ä¿¡ä¸­...';
        sendButton.disabled = true;
        
        // Cloudflare Functionã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡
        console.log('ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿é€ä¿¡é–‹å§‹:', { clubName, contactName, contactEmail, contactMessage });
        
        const response = await fetch('/api/send-contact-form', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            clubName,
            contactName,
            contactEmail,
            contactMessage
          }),
        });
        
        console.log('API ãƒ¬ã‚¹ãƒãƒ³ã‚¹:', response.status, response.statusText);
        
        const result = await response.json();
        console.log('API ãƒ¬ã‚¹ãƒãƒ³ã‚¹å†…å®¹:', result);
        
        if (response.ok && result.success) {
          alert('ãŠå•ã„åˆã‚ã›ã‚’å—ã‘ä»˜ã‘ã¾ã—ãŸã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚');
          closeContactForm();
        } else {
          throw new Error(result.error || 'é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸ');
        }
        
      } catch (error) {
        console.error('Contact form error:', error);
        alert('é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + error.message);
      } finally {
        // é€ä¿¡ãƒœã‚¿ãƒ³ã‚’å…ƒã«æˆ»ã™
        const sendButton = document.querySelector('#contactFormModal button[onclick="sendContactForm()"]');
        sendButton.textContent = 'é€ä¿¡';
        sendButton.disabled = false;
      }
    }

    // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ã‚´ãƒ«ãƒ•éƒ¨ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿
    document.addEventListener('DOMContentLoaded', loadGolfClubs);
  </script>
</body>
</html> 